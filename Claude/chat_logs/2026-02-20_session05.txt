PortaRe0 チャットログ要約
セッション: 05（2026-02-20）
Claude Project: PortaRe0

================================================================
セッション 05 - BQ25895 回路図完成
================================================================
日時: 2026-02-20

主な内容:
- PROJECT_PLAN.md を Claude フォルダに新規作成（セッション04の計画書を整形・保存）
- Claude.md の冒頭注記を更新（読み込み順を明記）
- KiCad power シートにて BQ25895 回路図を完成

================================================================
BQ25895 回路図 確定内容
================================================================

TS（Pin11）接続:
  - NTCサーミスタ未使用のため分圧回路で固定
  - REGN(22) ─── R6(10kΩ) ─── TS(11) ─── R7(10kΩ) ─── GND
  - TS = 50% V(REGN) → 正常温度範囲内に固定
  - GND直結は TS COLD フォルトで充電不可になるため不可（データシート確認済み）

右側ピン:
  - BAT(13,14) → VBAT / C1(10µF) + C2(100nF) to GNDPWR
  - SYS(15,16) → VSYS / C3(10µF) + C追加(100nF) to GNDPWR
  - PGND(17,18) → GNDPWR
  - PAD(25) → GNDPWR

上側ピン:
  - SW(19,20) → L1(1.5µH / 3A以上) → VBAT
  - BTST(21) → C4(100nF) → SW(19,20)
  - REGN(22) → C5(100nF) → GND（+ TS分圧回路へ）
  - PMID(23) → C6(4.7µF) → GND
  - DSEL(24) → GND

その他配線（セッション04から引き継ぎ済み）:
  - VBUS(1) ← USB_VBUS
  - D+(2), D-(3) ← USB_D+/-
  - STAT(4) → LED_Small
  - SCL(5), SDA(6) ← I2C_SCL/SDA（10kΩ プルアップ to 3V3）※後でRP2040に接続
  - INT(7) → BQ_INT（10kΩ to 3V3）
  - OTG(8), CE(9) → GND
  - ILIM(10) → R5(270Ω) → GNDPWR
  - QON(12) → R8(10kΩ) → 3V3

================================================================
議論・確認事項
================================================================

I2C（SCL/SDA）の接続先:
  - BQ25895 の SCL/SDA は RP2040 の I2C GPIO に接続する（確定）
  - RP2040 が I2C マスターとして BQ25895 を読み取り、USB CDC 経由で SBC に情報を渡す
  - バッテリー残量（%）は電圧から推定 or クーロンカウンタ積算で対応

インダクタ（SW↔VBAT間）:
  - スイッチング周波数デフォルト 1.5MHz
  - 推奨値：1.5µH / 3A以上 / DCR <50mΩ
  - JLCPCB在庫候補：SWPA4012S1R5MT または SRR4028-1R5Y（要確認）

================================================================
追加決定事項（セッション05後半）
================================================================

I2C（SCL/SDA）:
  - power シートの I2C_SCL/SDA ネットラベル → Global Label に変更済み
  - keyboard シートの RP2040 側も同名 Global Label で接続する

電源スイッチ・キルスイッチ構成（確定）:
  - キルスイッチ：VSYS ライン上に物理スイッチ（筐体奥に配置）/ 緊急用
    → VSYS を物理遮断するためスイッチは大電流対応品が必要
  - キルスイッチON = VSYS供給 = RP2040常時起動（3.3V動作）
  - モーメンタリボタン：EN ピンを一時的に High にして TPS61023 を起動
  - RP2040 が EN ピンを High に保持（SBC GPIO 不要）
  - シャットダウン：RP2040 が EN Low → 5V断

EN ピン回路:
  VSYS ─── 起動ボタン（モーメンタリ）──┬── EN(TPS61023 Pin2)
                                         │
                                    RP2040_EN（Global Label）
                                         │
                                     R(100kΩ) → GND

動作フロー:
  1. キルスイッチON → VSYS → AP2112K → 3.3V → RP2040起動
  2. モーメンタリボタン押す → EN = High → TPS61023起動 → 5V出力
  3. RP2040がENをHighに保持
  4. シャットダウン時：RP2040がSBCにシャットダウン信号 → 完了確認 → EN Low → 5V断

TPS61023 部品値（確定）:
  - L1: 1µH / 3A以上
  - C_IN: 10µF
  - C_OUT: 22µF
  - R_top: 910kΩ（FB分圧、出力5V設定）
  - R_bot: 100kΩ

================================================================
次のアクション
================================================================
1. KiCad: TPS61023 昇圧回路（EN回路含む）
2. KiCad: AP2112K LDO 回路
3. KiCad: VL812 usb_hub シート
4. KiCad: RP2040 keyboard シート（SCL/SDA Global Label接続・EN保持GPIO）
5. KiCad: MAX98357A × 2 audio シート
6. KiCad: コネクタ類
