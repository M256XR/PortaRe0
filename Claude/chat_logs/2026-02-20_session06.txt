PortaRe0 チャットログ要約
セッション: 06（2026-02-20）
Claude Project: PortaRe0

================================================================
セッション 06 - TPS61023・AP2112K 回路図完成
================================================================
日時: 2026-02-20

主な内容:
- TPS61023 昇圧回路（EN回路含む）完成
- AP2112K LDO 3.3V 回路完成
- VL812 データシート取得・回路設計方針整理

================================================================
TPS61023 回路図 確定内容
================================================================

ピン配置（easyeda2kicadシンボル）:
  Pin1: FB
  Pin2: EN
  Pin3: VIN
  Pin4: GND
  Pin5: SW
  Pin6: VOUT

部品値（確定）:
  - U2: TPS61023DRLR
  - L2: 1µH / 3A以上 / DCR低め
  - C8: 10µF（VIN入力デカップリング）
  - C9: 100nF（VIN入力デカップリング）
  - C10: 22µF（VOUT出力平滑）
  - C11: 100nF（VOUT出力平滑）
  - R9: 910kΩ（FB分圧 上側、5V_SYS～FB間）
  - R10: 100kΩ（FB分圧 下側、FB～GNDPWR間）
  - R11: 100kΩ（ENプルダウン、EN～GNDPWR間）
  - SW1: SPSTモーメンタリ（起動ボタン）

配線詳細:
  - VIN(Pin3) ← VSYS / C8・C9 → GNDPWR
  - GND(Pin4) → GNDPWR
  - SW(Pin5) ─── L2(1µH) ─── VSYS
  - VOUT(Pin6) → 5V_SYS（Global Label）/ C10・C11 → GNDPWR
  - FB(Pin1) ← R9(910kΩ) ← 5V_SYS / R10(100kΩ) → GNDPWR
  - EN(Pin2) ← SW1（VSYS側）/ RP2040_EN（Global Label）/ R11(100kΩ) → GNDPWR

EN回路（確定）:
  VSYS ─── SW1（モーメンタリ）───┬─── EN(Pin2)
                                  │
                             RP2040_EN（Global Label）
                                  │
                             R11(100kΩ) ─── GNDPWR

動作フロー:
  1. キルスイッチON → VSYS通電 → AP2112K → 3.3V → RP2040起動
  2. SW1押す → EN=High → TPS61023起動 → 5V出力
  3. RP2040がRP2040_EN GPIOをHighに保持
  4. シャットダウン時：RP2040がEN Low → 5V断

================================================================
AP2112K 回路図 確定内容
================================================================

部品値（確定）:
  - U3: AP2112K-3.3TRG1
  - C12: 1µF（VOUT出力デカップリング）
  - C13: 1µF（VIN入力デカップリング）

ピン配置:
  Pin1: VIN
  Pin2: GND
  Pin3: EN
  Pin4: NC（未接続マーク付き）
  Pin5: VOUT

配線詳細:
  - VIN(Pin1) ← 5V_SYS / C13(1µF) → GNDPWR
  - GND(Pin2) → GNDPWR
  - EN(Pin3) ← 5V_SYS（VINと直結、常時ON）
  - NC(Pin4) → 未接続（×マーク）
  - VOUT(Pin5) → +3.3V（パワーシンボル）/ C12(1µF) → GNDPWR

備考:
  - ENをVINに直結することで常時ON（シャットダウン制御なし）
  - RP2040はキルスイッチON中は常時3.3V供給が必要なため常時ONが正しい
  - RP2040消費電力（最大100mA）はAP2112K出力（600mA）の範囲内

================================================================
VL812 データシート整理（次セッション用）
================================================================

データシート: VL812 (B2) Rev 1.03, VIA Labs, December 31, 2013
パッケージ: QFN76L（9×9×0.85mm）

電源構成（内蔵レギュレータ使用）:
  5V_SYS → VCC5I(Pin19) → 内蔵LDO → DC33FB(Pin18) = 3.3V内部電源
  5V_SYS → VCC5I(Pin38) → 内蔵DC-DC → DC12FB(Pin37,40) = 1.2V内部電源
  LX(Pin39) → L(4.7µH) → DC12FB（DC-DCスイッチングノード）

各電源ピン接続先:
  VDD(30,48,58): DC12FB（1.2V）/ 各ピンに10µF+0.1µFデカップリング
  VSUS33(36,41,49): DC33FB（3.3V）/ 各ピンに0.1µFデカップリング
  VCCA33SSM(2), VCCA33SS12(71), VCCA33SS34(8): DC33FB / 各100nF+10pF
  VCCA12SSRX0(24), VCCA12SSRX1(61), VCCA12SSRX2(68),
  VCCA12SSRX3(5), VCCA12SSRX4(13), VCCA12SSM(74): DC12FB / 各100nF+10pF

USB接続:
  Upstream（Cubie A7Z USB3.0）:
    SSTX0+(23), SSTX0-(22), SSRX0+(26), SSRX0-(25) ← USB3.0 SS
    USBDP+(28), USBDP-(29) ← USB2.0
  DP1（外部USB-C）:
    SSTX1+(59), SSTX1-(60), SSRX1+(62), SSRX1-(63) ← USB3.0 SS
    USBHP1+(64), USBHP1-(65) ← USB2.0
  DP2（外部USB-A）:
    SSTX2+(66), SSTX2-(67), SSRX2+(69), SSRX2-(70) ← USB3.0 SS
    USBHP2+(72), USBHP2-(73) ← USB2.0
  DP3（RP2040）:
    SSTX3+(3), SSTX3-(4), SSRX3+(6), SSRX3-(7) ← USB3.0 SS（RP2040はUSB2.0のみ使用）
    USBHP3+(9), USBHP3-(10) ← USB2.0
  DP4: 未使用（NC）

クリスタル:
  SSXI(75) / SSXO(76) ← 25MHz水晶発振子
  負荷コンデンサ: 12〜18pF × 2個（各ピン〜GND）

SPI Flash（W25Q32）接続:
  USBHMBR4(32) = SPICS# → W25Q32 /CS（10kΩプルアップ to 3.3V）
  USBHMBR3(33) = SPISCLK → W25Q32 CLK
  USBHMBR2(34) = SPISI → W25Q32 DI
  USBHMBR1(35) = SPISO → W25Q32 DO
  各ピン(32〜35)に100kΩプルダウン（GNDへ）
  W25Q32: /HOLD, /WP → 3.3Vプルアップ（10kΩ）

ストラップ・その他:
  SSREXT(1) → 200Ω → GND（1%精度）
  RESET#(54) → 10kΩ → 3.3V + 100nF → GND（RCリセット回路）
  VBUSDET(31) → 5V_SYS
  EXTPWRON(47) → 5V_SYS（分圧で3.3Vレベルへ）
  USBHOC1#(45), USBHOC2#(44) → 3.3Vプルアップ（過電流保護IC不使用）
  TESTEN(57) → NC（内蔵プルダウン）
  USBHPE1#(43), USBHPE2B#(42) → 外部パワースイッチへ（or NC）
  COREPWRDN#(46) → NC or 3.3Vプルアップ
  VCC12I(20), DC10FB(21) → NC（フロート）

USB3.0 SS差動ペアのACカップリング:
  各SSラインに100nFコンデンサを直列挿入

================================================================
進捗状況
================================================================

Power シート:
  [x] BQ25895 回路完成
  [x] TPS61023 回路完成
  [x] AP2112K 回路完成
  [ ] VL812 usb_hub シート
  [ ] RP2040 keyboard シート
  [ ] MAX98357A × 2 audio シート
  [ ] コネクタ類

================================================================
次のアクション
================================================================
1. KiCad: VL812 usb_hub シート（電源ピン → デカップリング → USB → SPI Flash → ストラップ）
2. KiCad: RP2040 keyboard シート
3. KiCad: MAX98357A × 2 audio シート
4. KiCad: コネクタ類
